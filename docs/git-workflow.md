# Работа с ветками Git и GitHub

Пошаговая инструкция: как вносить изменения, отправлять на GitHub и объединять с основной веткой.

---

## Общая схема работы

```
1. Создать ветку → 2. Внести изменения → 3. Закоммитить → 
4. Отправить на GitHub → 5. Создать PR → 6. Смержить → 7. Обновить локальный main
```

---

## Шаг 1: Создание новой ветки

```bash
git checkout -b название-ветки
```

**Что делает:** Создаёт новую ветку и сразу переключается на неё.

**Пример:**
```bash
git checkout -b add-new-feature
```

**Правила именования веток:**
- Используй латиницу и дефисы
- Называй по смыслу изменений: `fix-parser-bug`, `add-telegram-bot`, `update-docs`

---

## Шаг 2: Внесение изменений

Редактируй файлы как обычно. Проверяй статус:

```bash
git status
```

**Что покажет:**
- **Changes not staged for commit** — изменённые файлы (красные)
- **Untracked files** — новые файлы, которые Git ещё не отслеживает
- **Changes to be committed** — файлы, готовые к коммиту (зелёные)

---

## Шаг 3: Добавление файлов в индекс

### Добавить все изменения:
```bash
git add .
```

### Добавить конкретный файл:
```bash
git add имя_файла.py
```

### Добавить несколько файлов:
```bash
git add файл1.py файл2.py папка/
```

**Что делает:** Помечает файлы для включения в следующий коммит. Файлы попадают в "индекс" (staging area).

---

## Шаг 4: Создание коммита

```bash
git commit -m "Описание изменений"
```

**Что делает:** Сохраняет изменения из индекса в историю Git.

**Правила хороших сообщений:**
- Пиши кратко и по делу
- Начинай с глагола: "Добавил", "Исправил", "Обновил"
- Примеры:
  - `"Добавил поддержку GitHub в парсер"`
  - `"Исправил баг с кодировкой"`
  - `"Обновил документацию"`

---

## Шаг 5: Отправка ветки на GitHub

```bash
git push origin название-ветки
```

**Что делает:** Загружает твою ветку на GitHub.

**Пример:**
```bash
git push origin add-new-feature
```

При первой отправке новой ветки Git может предложить команду с `--set-upstream` — просто скопируй и выполни её.

---

## Шаг 6: Создание Pull Request на GitHub

1. Открой репозиторий на GitHub
2. Увидишь жёлтую плашку: **"add-new-feature had recent pushes"**
3. Нажми кнопку **"Compare & pull request"**
4. Заполни описание (опционально)
5. Нажми **"Create pull request"**

---

## Шаг 7: Слияние (Merge) в основную ветку

### Вариант А: Через GitHub (рекомендуется)

1. На странице Pull Request нажми **"Merge pull request"**
2. Подтверди нажатием **"Confirm merge"**
3. Можно удалить ветку кнопкой **"Delete branch"**

### Вариант Б: Локально

```bash
git checkout main
git merge название-ветки
git push origin main
```

---

## Шаг 8: Обновление локальной основной ветки

После merge на GitHub твой локальный `main` отстаёт. Обнови его:

```bash
git checkout main
git pull origin main
```

**Что делает:**
- `checkout main` — переключается на ветку main
- `pull origin main` — скачивает изменения с GitHub и применяет их

---

## Полный пример рабочего цикла

```bash
# 1. Убедись, что main актуален
git checkout main
git pull origin main

# 2. Создай ветку для новой задачи
git checkout -b add-ollama-support

# 3. ... редактируй файлы ...

# 4. Проверь изменения
git status

# 5. Добавь файлы
git add .

# 6. Закоммить
git commit -m "Добавил поддержку Ollama"

# 7. Отправь на GitHub
git push origin add-ollama-support

# 8. Создай PR на GitHub и смержь

# 9. Обнови локальный main
git checkout main
git pull origin main
```

---

## Полезные команды

| Команда | Описание |
|---------|----------|
| `git status` | Показать состояние файлов |
| `git branch` | Показать список веток |
| `git branch -a` | Показать все ветки (включая удалённые) |
| `git log --oneline` | Краткая история коммитов |
| `git diff` | Показать изменения в файлах |
| `git checkout main` | Переключиться на ветку main |
| `git branch -d ветка` | Удалить локальную ветку |

---

## Частые ошибки

### "Your branch is behind"
Твоя ветка отстала от GitHub. Решение:
```bash
git pull origin main
```

### Забыл переключиться с main перед изменениями
Если уже начал редактировать в main:
```bash
git checkout -b новая-ветка
```
Изменения перенесутся в новую ветку.

### Конфликт слияния (merge conflict)
Git не смог автоматически объединить изменения. Открой файлы с конфликтами, выбери нужную версию, затем:
```bash
git add .
git commit -m "Разрешил конфликт"
```
