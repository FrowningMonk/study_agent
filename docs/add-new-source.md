# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—é –Ω–æ–≤–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞

–ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –Ω–æ–≤–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≤ —Å–∏—Å—Ç–µ–º—É –∞–≥–µ–Ω—Ç–∞ –∏–∑—É—á–µ–Ω–∏—è.

---

## üìã –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞: –ê–Ω–∞–ª–∏–∑ –∏—Å—Ç–æ—á–Ω–∏–∫–∞

–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã —Å–æ–±–µ—Ä–∏—Ç–µ —Å–ª–µ–¥—É—é—â—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–æ–≤–æ–º –∏—Å—Ç–æ—á–Ω–∏–∫–µ:

### 1. **–ë–∞–∑–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã**

- [ ] –î–æ–º–µ–Ω–Ω–æ–µ –∏–º—è (–Ω–∞–ø—Ä–∏–º–µ—Ä: `infostart.ru`, `medium.com`)
- [ ] –¢–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (—Å—Ç–∞—Ç—å–∏, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è, —Ç—É—Ç–æ—Ä–∏–∞–ª—ã)
- [ ] –ü—Ä–∏–º–µ—Ä—ã URL (–º–∏–Ω–∏–º—É–º 2-3 —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞)
- [ ] –¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è (–¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–º–ø—Ç–∞)

### 2. **HTML —Å—Ç—Ä—É–∫—Ç—É—Ä–∞**

–ò–∑—É—á–∏—Ç–µ HTML-—Ä–∞–∑–º–µ—Ç–∫—É —Ç–∏–ø–∏—á–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã:

- [ ] –°–µ–ª–µ–∫—Ç–æ—Ä –∑–∞–≥–æ–ª–æ–≤–∫–∞ (`h1`, –∫–ª–∞—Å—Å—ã)
- [ ] –°–µ–ª–µ–∫—Ç–æ—Ä –∞–≤—Ç–æ—Ä–∞ (—Å—Å—ã–ª–∫–∞, –∏–º—è –∫–ª–∞—Å—Å–∞)
- [ ] –°–µ–ª–µ–∫—Ç–æ—Ä –¥–∞—Ç—ã –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)
- [ ] –°–µ–ª–µ–∫—Ç–æ—Ä –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- [ ] –°–µ–ª–µ–∫—Ç–æ—Ä—ã —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è (—Ä–µ–∫–ª–∞–º–∞, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, –Ω–∞–≤–∏–≥–∞—Ü–∏—è)

**–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞:**
- –ò–Ω—Å–ø–µ–∫—Ç–æ—Ä –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
- BeautifulSoup –≤ Python (—Ç–µ—Å—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã)

### 3. **–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Å—Ç–∞—Ç—å–∏**

–ö–∞–∫ –∏–∑–≤–ª–µ—á—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∏–∑ URL –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞:

```
–ü—Ä–∏–º–µ—Ä—ã:
habr.com/ru/articles/123456/        ‚Üí ID: 123456
github.com/owner/repo               ‚Üí ID: owner_repo
infostart.ru/public/886103/         ‚Üí ID: 886103
medium.com/@user/article-slug-123   ‚Üí ID: article-slug-123 –∏–ª–∏ user_article-slug-123
```

---

## üîß –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –ø–∞—Ä—Å–µ—Ä–∞ –≤ `scraper.py`

### 1.1. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞

–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é —Å–µ–∫—Ü–∏—é –≤ [scraper.py](../scraper.py) –ø–æ—Å–ª–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–∞—Ä—Å–µ—Ä–æ–≤:

```python
# =============================================================================
# –ü–∞—Ä—Å–µ—Ä [–ù–ê–ó–í–ê–ù–ò–ï –ò–°–¢–û–ß–ù–ò–ö–ê]
# =============================================================================


def _parse_–∏—Å—Ç–æ—á–Ω–∏–∫(url: str) -> dict:
    """
    –ü–∞—Ä—Å–∏—Ç –∫–æ–Ω—Ç–µ–Ω—Ç —Å [–ù–∞–∑–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞].

    –ò–∑–≤–ª–µ–∫–∞–µ—Ç: –∑–∞–≥–æ–ª–æ–≤–æ–∫, –∞–≤—Ç–æ—Ä, [–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è], —Ç–µ–∫—Å—Ç.

    Args:
        url: URL —Å—Ç–∞—Ç—å–∏/–∫–æ–Ω—Ç–µ–Ω—Ç–∞.

    Returns:
        –°–ª–æ–≤–∞—Ä—å —Å –ø–æ–ª—è–º–∏: url, source, title, author, content, content_length.
        –ü—Ä–∏ –æ—à–∏–±–∫–µ ‚Äî —Å–ª–æ–≤–∞—Ä—å —Å –ø–æ–ª–µ–º 'error'.
    """
    print(f'üì• –ó–∞–≥—Ä—É–∂–∞—é [–ò—Å—Ç–æ—á–Ω–∏–∫]: {url}')

    soup, error = _fetch_page(url)
    if error:
        return error

    # –ó–∞–≥–æ–ª–æ–≤–æ–∫
    title_elem = soup.find('h1', class_='–Ω–∞–∑–≤–∞–Ω–∏–µ-–∫–ª–∞—Å—Å–∞')
    title = title_elem.get_text(strip=True) if title_elem else '–ù–µ –Ω–∞–π–¥–µ–Ω'

    # –ê–≤—Ç–æ—Ä
    author = '–ù–µ –Ω–∞–π–¥–µ–Ω'
    author_elem = soup.find('a', class_='author-class')
    if author_elem:
        author = author_elem.get_text(strip=True)

    # –î–∞—Ç–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    date = '–ù–µ —É–∫–∞–∑–∞–Ω–∞'
    date_elem = soup.find('time')
    if date_elem:
        date = date_elem.get_text(strip=True)

    # –¢–µ–∫—Å—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞
    content = _extract_–∏—Å—Ç–æ—á–Ω–∏–∫_content(soup)

    return {
        'url': url,
        'source': '–∏—Å—Ç–æ—á–Ω–∏–∫',  # –∫–æ—Ä–æ—Ç–∫–æ–µ –∏–º—è
        'title': title,
        'author': author,
        'date': date,  # –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
        'content': content,
        'content_length': len(content),
    }


def _extract_–∏—Å—Ç–æ—á–Ω–∏–∫_content(soup: BeautifulSoup) -> str:
    """–ò–∑–≤–ª–µ–∫–∞–µ—Ç –∏ –æ—á–∏—â–∞–µ—Ç —Ç–µ–∫—Å—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞."""
    # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (–ø–æ–ø—Ä–æ–±—É–π—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤)
    content_elem = soup.find('div', class_='main-content')

    if not content_elem:
        # –†–µ–∑–µ—Ä–≤–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã
        content_elem = soup.find('article')

    if not content_elem:
        return '–ù–µ –Ω–∞–π–¥–µ–Ω'

    # –£–¥–∞–ª—è–µ–º –Ω–µ–Ω—É–∂–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
    for tag in content_elem(['script', 'style', 'aside', 'iframe', 'nav']):
        tag.decompose()

    # –£–¥–∞–ª—è–µ–º —Å–ª—É–∂–µ–±–Ω—ã–µ –±–ª–æ–∫–∏
    for elem in content_elem.find_all('div', class_=['comments', 'ads', 'sidebar']):
        elem.decompose()

    content = content_elem.get_text(separator='\n', strip=True)

    # –û—á–∏—Å—Ç–∫–∞ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
    # –ù–∞–ø—Ä–∏–º–µ—Ä, —É–¥–∞–ª–µ–Ω–∏–µ –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
    lines = content.split('\n')
    cleaned_lines = [line for line in lines if line.strip() and line.strip() != '>']
    content = '\n'.join(cleaned_lines)

    # –û—á–∏—â–∞–µ–º –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—É—Å—Ç—ã–µ —Å—Ç—Ä–æ–∫–∏
    content = re.sub(r'\n{3,}', '\n\n', content)

    return _truncate_content(content)
```

### 1.2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–æ—É—Ç–µ—Ä–∞

–î–æ–±–∞–≤—å—Ç–µ –Ω–æ–≤—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –≤ —Ñ—É–Ω–∫—Ü–∏—é `get_article()`:

```python
def get_article(url: str) -> dict:
    """
    –†–æ—É—Ç–µ—Ä: –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫ –∏ –≤—ã–∑—ã–≤–∞–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –ø–∞—Ä—Å–µ—Ä.
    """
    url = url.strip()

    if 'habr.com' in url:
        return _parse_habr(url)
    elif 'github.com' in url:
        return _parse_github(url)
    elif 'infostart.ru' in url:
        return _parse_infostart(url)
    elif '–∏—Å—Ç–æ—á–Ω–∏–∫.com' in url:  # ‚Üê –î–û–ë–ê–í–¨–¢–ï –ó–î–ï–°–¨
        return _parse_–∏—Å—Ç–æ—á–Ω–∏–∫(url)
    else:
        return {'error': f'–ò—Å—Ç–æ—á–Ω–∏–∫ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è: {url}'}
```

### 1.3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –º–æ–¥—É–ª—è

–í –Ω–∞—á–∞–ª–µ [scraper.py](../scraper.py):

```python
"""
–ú–æ–¥—É–ª—å –ø–∞—Ä—Å–∏–Ω–≥–∞ —Å—Ç–∞—Ç–µ–π –∏–∑ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤.

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏:
    - habr.com (—Å—Ç–∞—Ç—å–∏)
    - github.com (README + –¥—Ä—É–≥–∏–µ .md —Ñ–∞–π–ª—ã)
    - infostart.ru (—Å—Ç–∞—Ç—å–∏ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø–æ 1–°)
    - –∏—Å—Ç–æ—á–Ω–∏–∫.com (–æ–ø–∏—Å–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞)  # ‚Üê –î–û–ë–ê–í–¨–¢–ï

Example:
    >>> from scraper import get_article
    >>> data = get_article('https://–∏—Å—Ç–æ—á–Ω–∏–∫.com/article/123/')  # ‚Üê –î–û–ë–ê–í–¨–¢–ï
    >>> print(data['title'])
"""
```

### 1.4. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ URL

–í —Ñ—É–Ω–∫—Ü–∏—é `_run_tests()`:

```python
def _run_tests() -> None:
    """–ó–∞–ø—É—Å–∫–∞–µ—Ç —Ç–µ—Å—Ç—ã –ø–∞—Ä—Å–µ—Ä–æ–≤."""
    test_urls = [
        'https://habr.com/ru/articles/984968/',
        'https://github.com/anthropics/anthropic-cookbook',
        'https://infostart.ru/public/886103/',
        'https://–∏—Å—Ç–æ—á–Ω–∏–∫.com/article/123/',  # ‚Üê –î–û–ë–ê–í–¨–¢–ï
    ]
```

---

## üß† –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞ –≤ `summarizer.py`

### 2.1. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤

–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—É—é —Å–µ–∫—Ü–∏—é –ø–æ—Å–ª–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø—Ä–æ–º–ø—Ç–æ–≤:

```python
# =============================================================================
# –ü–†–û–ú–ü–¢–´ –î–õ–Ø [–ù–ê–ó–í–ê–ù–ò–ï –ò–°–¢–û–ß–ù–ò–ö–ê]
# =============================================================================

–ò–°–¢–û–ß–ù–ò–ö_SYSTEM_PROMPT: str = """–¢—ã ‚Äî [—Ä–æ–ª—å –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞].

–¢–≤–æ—è –∑–∞–¥–∞—á–∞: [–æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è].

–ü—Ä–∞–≤–∏–ª–∞:
- –ü–∏—à–∏ –ø—Ä–æ—Å—Ç—ã–º —Ç–µ–∫—Å—Ç–æ–º –±–µ–∑ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –ù–∏–∫–∞–∫–∏—Ö —Å–ø–∏—Å–∫–æ–≤, –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤, —ç–º–æ–¥–∑–∏
- –ú–∞–∫—Å–∏–º—É–º 5-7 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π
- [–°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞]
- –í –∫–æ–Ω—Ü–µ ‚Äî –≥–ª–∞–≤–Ω—ã–π –≤—ã–≤–æ–¥/—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è
"""

–ò–°–¢–û–ß–ù–ò–ö_USER_PROMPT_TEMPLATE: str = """[–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—é –∫–æ–Ω—Å–ø–µ–∫—Ç–∞]

–ó–ê–ì–û–õ–û–í–û–ö: {title}
–ê–í–¢–û–†: {author}
[–î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ü–û–õ–Ø: {field}]

–¢–ï–ö–°–¢:
{content}
"""
```

**–ü—Ä–∏–º–µ—Ä—ã —Ä–æ–ª–µ–π –ø–æ —Ç–∏–ø–∞–º –∫–æ–Ω—Ç–µ–Ω—Ç–∞:**
- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Å—Ç–∞—Ç—å–∏: "–ø–æ–º–æ—â–Ω–∏–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞", "—Ñ–∏–ª—å—Ç—Ä —Å—Ç–∞—Ç–µ–π –¥–ª—è –∑–∞–Ω—è—Ç–æ–≥–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞"
- –¢—É—Ç–æ—Ä–∏–∞–ª—ã: "–Ω–∞—Å—Ç–∞–≤–Ω–∏–∫ –ø–æ [—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è]"
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: "–∞–Ω–∞–ª–∏—Ç–∏–∫ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏"
- –ë–ª–æ–≥–∏: "—Ä–µ–¥–∞–∫—Ç–æ—Ä –∫–æ–Ω—Ç–µ–Ω—Ç–∞"

### 2.2. –°–æ–∑–¥–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–æ–º–ø—Ç–∞

```python
def _create_–∏—Å—Ç–æ—á–Ω–∏–∫_prompt(article_data: dict) -> tuple[str, str]:
    """
    –°–æ–∑–¥–∞—ë—Ç –ø—Ä–æ–º–ø—Ç –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —Å [–ò—Å—Ç–æ—á–Ω–∏–∫].

    Args:
        article_data: –°–ª–æ–≤–∞—Ä—å —Å –¥–∞–Ω–Ω—ã–º–∏.

    Returns:
        –ö–æ—Ä—Ç–µ–∂ (system_prompt, user_prompt).
    """
    user_prompt = –ò–°–¢–û–ß–ù–ò–ö_USER_PROMPT_TEMPLATE.format(
        title=article_data.get('title', '–ù–µ —É–∫–∞–∑–∞–Ω'),
        author=article_data.get('author', '–ù–µ —É–∫–∞–∑–∞–Ω'),
        # –î–æ–±–∞–≤—å—Ç–µ –¥—Ä—É–≥–∏–µ –ø–æ–ª—è –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
        content=article_data.get('content', '–¢–µ–∫—Å—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç'),
    )
    return –ò–°–¢–û–ß–ù–ò–ö_SYSTEM_PROMPT, user_prompt
```

### 2.3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–æ—É—Ç–µ—Ä–∞ –ø—Ä–æ–º–ø—Ç–æ–≤

```python
def create_prompt(article_data: dict) -> tuple[str, str]:
    """
    –†–æ—É—Ç–µ—Ä: –≤—ã–±–∏—Ä–∞–µ—Ç –ø—Ä–æ–º–ø—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–∞.
    """
    source = article_data.get('source', 'unknown')

    if source == 'habr':
        return _create_habr_prompt(article_data)
    elif source == 'github':
        return _create_github_prompt(article_data)
    elif source == 'infostart':
        return _create_infostart_prompt(article_data)
    elif source == '–∏—Å—Ç–æ—á–Ω–∏–∫':  # ‚Üê –î–û–ë–ê–í–¨–¢–ï –ó–î–ï–°–¨
        return _create_–∏—Å—Ç–æ—á–Ω–∏–∫_prompt(article_data)
    else:
        raise ValueError(f'–ù–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫: {source}')
```

### 2.4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –º–æ–¥—É–ª—è

–í –Ω–∞—á–∞–ª–µ [summarizer.py](../summarizer.py):

```python
"""
–ú–æ–¥—É–ª—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Å–ø–µ–∫—Ç–æ–≤ —á–µ—Ä–µ–∑ OpenAI API –∏ Ollama.

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞–∑–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤:
    - habr.com ‚Äî —Å—Ç–∞—Ç—å–∏ (—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ, –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ)
    - github.com ‚Äî README —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
    - infostart.ru ‚Äî —Å—Ç–∞—Ç—å–∏ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø–æ 1–°
    - –∏—Å—Ç–æ—á–Ω–∏–∫.com ‚Äî [–æ–ø–∏—Å–∞–Ω–∏–µ]  # ‚Üê –î–û–ë–ê–í–¨–¢–ï
"""
```

---

## üîÑ –®–∞–≥ 3: –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–∞–π–ø–ª–∞–π–Ω–∞ –≤ `pipeline.py`

### 3.1. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ —Å–ø–∏—Å–æ–∫ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

```python
# –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏
SUPPORTED_SOURCES: dict[str, str] = {
    'habr.com': 'habr',
    'github.com': 'github',
    'infostart.ru': 'infostart',
    '–∏—Å—Ç–æ—á–Ω–∏–∫.com': '–∏—Å—Ç–æ—á–Ω–∏–∫',  # ‚Üê –î–û–ë–ê–í–¨–¢–ï
}
```

### 3.2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–º–µ–Ω —Ñ–∞–π–ª–æ–≤

```python
def generate_filename_from_url(url: str) -> str:
    """
    –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏–º—è —Ñ–∞–π–ª–∞ –∏–∑ URL.

    Examples:
        >>> generate_filename_from_url('https://–∏—Å—Ç–æ—á–Ω–∏–∫.com/article/123/')
        '–∏—Å—Ç–æ—á–Ω–∏–∫_123'
    """
    source = get_source_name(url)

    if source == 'habr':
        # ...
    elif source == 'github':
        # ...
    elif source == 'infostart':
        # ...
    elif source == '–∏—Å—Ç–æ—á–Ω–∏–∫':  # ‚Üê –î–û–ë–ê–í–¨–¢–ï
        # –õ–æ–≥–∏–∫–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è ID –¥–ª—è –≤–∞—à–µ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞
        # –ü—Ä–∏–º–µ—Ä—ã:
        # 1. –ß–∏—Å–ª–æ–≤–æ–π ID –≤ –∫–æ–Ω—Ü–µ: /article/123/ ‚Üí 123
        parts = url.rstrip('/').split('/')
        article_id = parts[-1] if parts[-1].isdigit() else 'unknown'
        return f'{source}_{article_id}'

        # 2. Slug –≤ URL: /article/my-article-title/ ‚Üí my-article-title
        # parts = url.rstrip('/').split('/')
        # slug = parts[-1] if parts[-1] else 'unknown'
        # return f'{source}_{slug}'

        # 3. –ö–æ–º–±–∏–Ω–∞—Ü–∏—è –∞–≤—Ç–æ—Ä/—Å—Ç–∞—Ç—å—è: /@user/article-title ‚Üí user_article-title
        # parts = url.rstrip('/').split('/')
        # if len(parts) >= 2 and parts[-2].startswith('@'):
        #     user = parts[-2][1:]  # —É–±–∏—Ä–∞–µ–º @
        #     article = parts[-1]
        #     return f'{source}_{user}_{article}'

    return f'{source}_unknown'
```

### 3.3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—ã–≤–æ–¥–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–ï—Å–ª–∏ —É –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –µ—Å—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø–æ–ª—è –¥–ª—è –≤—ã–≤–æ–¥–∞:

```python
def format_article_info(article_data: dict) -> None:
    """–í—ã–≤–æ–¥–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω–Ω–æ–π —Å—Ç–∞—Ç—å–µ."""
    source = article_data.get('source', 'unknown')

    print(f'‚úÖ –ö–æ–Ω—Ç–µ–Ω—Ç —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω: {article_data.get("title", "–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è")}')
    print(f'   –ò—Å—Ç–æ—á–Ω–∏–∫: {source}')
    print(f'   –ê–≤—Ç–æ—Ä: {article_data.get("author", "–ù–µ —É–∫–∞–∑–∞–Ω")}')

    # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–∞
    if source == 'habr':
        print(f'   –î–∞—Ç–∞: {article_data.get("date", "–ù–µ —É–∫–∞–∑–∞–Ω–∞")}')
    elif source == 'github':
        print(f'   –ó–≤—ë–∑–¥—ã: {article_data.get("stars", "0")}')
        # ...
    elif source == '–∏—Å—Ç–æ—á–Ω–∏–∫':  # ‚Üê –î–û–ë–ê–í–¨–¢–ï –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
        # –í—ã–≤–æ–¥–∏—Ç–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø–æ–ª—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞
        if article_data.get('views'):
            print(f'   –ü—Ä–æ—Å–º–æ—Ç—Ä—ã: {article_data.get("views")}')
        pass

    print(f'   –î–ª–∏–Ω–∞ —Ç–µ–∫—Å—Ç–∞: {article_data.get("content_length", 0)} —Å–∏–º–≤–æ–ª–æ–≤')
```

### 3.4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –º–æ–¥—É–ª—è

–í –Ω–∞—á–∞–ª–µ [pipeline.py](../pipeline.py):

```python
"""
–ï–¥–∏–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω: URL ‚Üí –ü–∞—Ä—Å–∏–Ω–≥ ‚Üí –ö–æ–Ω—Å–ø–µ–∫—Ç.

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏:
    - habr.com (—Å—Ç–∞—Ç—å–∏)
    - github.com (README —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤)
    - infostart.ru (—Å—Ç–∞—Ç—å–∏ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø–æ 1–°)
    - –∏—Å—Ç–æ—á–Ω–∏–∫.com (–æ–ø–∏—Å–∞–Ω–∏–µ)  # ‚Üê –î–û–ë–ê–í–¨–¢–ï

Example:
    –ö–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞:
        python pipeline.py https://–∏—Å—Ç–æ—á–Ω–∏–∫.com/article/123/  # ‚Üê –î–û–ë–ê–í–¨–¢–ï
"""
```

---

## ü§ñ –®–∞–≥ 4: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–æ—Ç–æ–º –≤ `bot.py`

### 4.1. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞

```python
# –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏
SUPPORTED_SOURCES: dict[str, str] = {
    'habr.com': 'habr',
    'github.com': 'github',
    'infostart.ru': 'infostart',
    '–∏—Å—Ç–æ—á–Ω–∏–∫.com': '–∏—Å—Ç–æ—á–Ω–∏–∫',  # ‚Üê –î–û–ë–ê–í–¨–¢–ï
}
```

### 4.2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –º–æ–¥—É–ª—è

–í –Ω–∞—á–∞–ª–µ [bot.py](../bot.py):

```python
"""
Telegram-–±–æ—Ç –¥–ª—è –∞–≥–µ–Ω—Ç–∞ –∏–∑—É—á–µ–Ω–∏—è –ò–ò.

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏:
    - habr.com (—Å—Ç–∞—Ç—å–∏)
    - github.com (README —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤)
    - infostart.ru (—Å—Ç–∞—Ç—å–∏ –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –ø–æ 1–°)
    - –∏—Å—Ç–æ—á–Ω–∏–∫.com (–æ–ø–∏—Å–∞–Ω–∏–µ)  # ‚Üê –î–û–ë–ê–í–¨–¢–ï
"""
```

---

## üìö –®–∞–≥ 5: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤ `docs/sources.md`

–î–æ–±–∞–≤—å—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –≤ [docs/sources.md](sources.md):

```markdown
## N. –ò—Å—Ç–æ—á–Ω–∏–∫.com

**–¢–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞:** [–û–ø–∏—Å–∞–Ω–∏–µ —Ç–∏–ø–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞]

**–§–æ—Ä–º–∞—Ç URL:**
```
https://–∏—Å—Ç–æ—á–Ω–∏–∫.com/[–ø—É—Ç—å]/[ID]/
```

**–ü—Ä–∏–º–µ—Ä:**
```
https://–∏—Å—Ç–æ—á–Ω–∏–∫.com/article/123456/
```

**–ß—Ç–æ –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è:**
- –ó–∞–≥–æ–ª–æ–≤–æ–∫
- –ê–≤—Ç–æ—Ä
- [–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è]
- –ü–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç (–¥–æ 8000 —Å–∏–º–≤–æ–ª–æ–≤)

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- [–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å 1]
- [–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å 2]
---

### –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤

1. **–ê–¥–∞–ø—Ç–∏—Ä—É–π—Ç–µ —Ä–æ–ª—å –ø–æ–¥ —Ç–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞**
   - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Å—Ç–∞—Ç—å–∏ ‚Üí "–ø–æ–º–æ—â–Ω–∏–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞"
   - –¢—É—Ç–æ—Ä–∏–∞–ª—ã ‚Üí "–Ω–∞—Å—Ç–∞–≤–Ω–∏–∫"
   - –ù–æ–≤–æ—Å—Ç–∏ ‚Üí "—Ä–µ–¥–∞–∫—Ç–æ—Ä –Ω–æ–≤–æ—Å—Ç–µ–π"

2. **–§–æ–∫—É—Å–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ —Ü–µ–Ω–Ω–æ—Å—Ç–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
   - –ß—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∑–Ω–∞–µ—Ç –∏–∑ –∫–æ–Ω—Å–ø–µ–∫—Ç–∞?
   - –°—Ç–æ–∏—Ç –ª–∏ —á–∏—Ç–∞—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª?
   - –ö–∞–∫–æ–≤ –≥–ª–∞–≤–Ω—ã–π –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–≤–æ–¥?

3. **–°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ –µ–¥–∏–Ω—ã–π —Å—Ç–∏–ª—å**
   - –ü—Ä–æ—Å—Ç–æ–π —Ç–µ–∫—Å—Ç –±–µ–∑ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
   - 5-7 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π
   - –ì–ª–∞–≤–Ω—ã–π –≤—ã–≤–æ–¥ –≤ –∫–æ–Ω—Ü–µ

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–º–µ–Ω —Ñ–∞–π–ª–æ–≤

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–Ω—è—Ç–Ω—ã–µ —Å—Ö–µ–º—ã**
   ```python
   –∏—Å—Ç–æ—á–Ω–∏–∫_ID              # habr_123456
   –∏—Å—Ç–æ—á–Ω–∏–∫_–∞–≤—Ç–æ—Ä_—Å—Ç–∞—Ç—å—è    # medium_user_article-title
   –∏—Å—Ç–æ—á–Ω–∏–∫_–∫–∞—Ç–µ–≥–æ—Ä–∏—è_ID    # docs_python_tutorial-123
   ```

2. **–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ edge cases**
   ```python
   # –ï—Å–ª–∏ ID –Ω–µ –Ω–∞–π–¥–µ–Ω
   article_id = parts[-1] if parts[-1].isdigit() else 'unknown'

   # –ï—Å–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ URL –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è
   if len(parts) < 2:
       return f'{source}_unknown'
   ```

---

## üîç –û—Ç–ª–∞–¥–∫–∞ –∏ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–∞—Ä—Å–µ—Ä –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç –∫–æ–Ω—Ç–µ–Ω—Ç

**–†–µ—à–µ–Ω–∏–µ:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –ù–∞–∂–º–∏—Ç–µ F12 ‚Üí Elements
3. –ù–∞–π–¥–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å —Ç–µ–∫—Å—Ç–æ–º
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–µ–ª–µ–∫—Ç–æ—Ä (–ü–ö–ú ‚Üí Copy ‚Üí Copy selector)
5. –ê–¥–∞–ø—Ç–∏—Ä—É–π—Ç–µ —Å–µ–ª–µ–∫—Ç–æ—Ä –¥–ª—è BeautifulSoup

### –ü—Ä–æ–±–ª–µ–º–∞: ValueError –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø—Ä–æ–º–ø—Ç–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ source —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –∏–º–µ–Ω–µ–º –≤ —Ä–æ—É—Ç–µ—Ä–µ
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è `_create_–∏—Å—Ç–æ—á–Ω–∏–∫_prompt()` –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—è–¥–æ–∫ –∏–º–ø–æ—Ä—Ç–æ–≤

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. –í—ã–≤–µ–¥–∏—Ç–µ —á–∞—Å—Ç–∏ URL: `print(url.rstrip('/').split('/'))`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω–¥–µ–∫—Å—ã: `parts[-1]`, `parts[-2]`
3. –î–æ–±–∞–≤—å—Ç–µ –æ–±—Ä–∞–±–æ—Ç–∫—É –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤

---
